# 小程序-简介

## 为什么是微信小程序 ？

1. 微信有海量⽤⼾，⽽且粘性很⾼，在微信⾥开发产品更容易触达⽤⼾；

2. 推⼴app 或公众号的成本太⾼。

3. 开发适配成本低。

4. 容易⼩规模试错，然后快速迭代。

5. 跨平台。

## 小程序与普通网页开发的区别

1. 运行环境不同

**网页**运行在**浏览器环境**中

**小程序**运行在**微信环境**中

2. API 不同

由于运行环境的不同，所以小程序中，

无法调用 DOM和BOM的API。

但是，小程序中可以调用微信环境提供的各种 API，例如：

- 地理定位

- 扫码

- 支付

3. 开发模式不同

网页的开发模式：**浏览器 +代码编辑器**

小程序有自己的一套标准开发模式：

- **申请小程序开发账号**
- **安装小程序开发者工具**
- **创建和配置小程序项目**

## 小程序代码的构成 - 项目结构

1.基本组成结构

![0](https://note.youdao.com/yws/public/resource/c99ad8ee8977e056429a6768b07877cb/xmlnote/WEB3f86b4e72799babc61d27f85c60d0299/WEBRESOURCE029b89ecc91d4296554f2390913afd98/8832)

① **pages** 用来存放所有小程序的页面

② utils 用来存放工具性质的模块（例如：格式化时间的自定义模块）

③ **app.js 小程序项目的入口文件**

④ **app.json 小程序项目的全局配置文件**

⑤ app.wxss 小程序项目的全局样式文件

⑥ project.config.json 项目的配置文件

⑦ sitemap.json 用来配置小程序及其页面是否允许被微信索引

2.小程序页面的组成部分

小程序官方建议把所有小程序的页面，都存放在**pages目录**中，以**单独的文件夹**存在，如图所示：

![0](https://note.youdao.com/yws/public/resource/c99ad8ee8977e056429a6768b07877cb/xmlnote/WEB3f86b4e72799babc61d27f85c60d0299/WEBRESOURCE5a52cf0452f2f7dee26e15a5808f721c/8849)

其中，每个页面由 4 个基本文件组成，它们分别是：

① **.js** 文件（页面的脚本文件，存放页面的数据、事件处理函数等）

② **.json** 文件（当前页面的配置文件，配置窗口的外观、表现等）

③ **.wxml** 文件（页面的模板结构文件）

④ **.wxss** 文件（当前页面的样式表文件）

## 小程序代码的构成 - JSON 配置文件

### 1. JSON 配置文件的作用

JSON是一种数据格式，在实际开发中，JSON总是以**配置文件**的形式出现。小程序项目中也不例外：通过不同的.json配置文件，可以对小程序项目进行不同级别的配置。

小程序项目中有4种json配置文件，分别是：

①项目根目录中的**app.json**配置文件

②项目根目录中的**project.config.json**配置文件

③项目根目录中的sitemap.json 配置文件

④**每个页面文件夹中的.json配置文件**

### 2. app.json 文件

![0](https://note.youdao.com/yws/public/resource/c99ad8ee8977e056429a6768b07877cb/xmlnote/WEB3f86b4e72799babc61d27f85c60d0299/WEBRESOURCEc2fe097058a7b65adf6888181de03494/8897)

app.json是当前小程序的全局配置，包括了小程序的所有页面路径、窗口外观、界面表现、底部 tab等。Demo项目里边的app.json配置内容如下：

简单了解下这4个配置项的作用：

①pages：用来记录当前小程序所有页面的路径

②window：全局定义小程序所有页面的背景色、文字颜色等

③style：全局定义小程序组件所使用的样式版本

④sitemapLocation：用来指明sitemap.json 的位置

### 3.project.config.json 文件

project.config.json是项目配置文件，用来记录我们对小程序开发工具所做的个性化配置，例如：

- setting 中保存了编译相关的配置
- projectname 中保存的是项目名称
- appid 中保存的是小程序的账号ID

### 4.sitemap.json 文件

微信现已开放小程序内搜索，效果类似于PC网页的SEO。sitemap.json 文件用来配置小程序页面是否允许微信索引。

当开发者允许微信索引时，微信会通过爬虫的形式，为小程序的页面内容建立索引。当用户的搜索关键字和页面的索引匹配成功的时候，小程序的页面将可能展示在搜索结果中。

注意：sitemap的索引提示是默认开启的，如需要关闭sitemap的索引提示，可在小程序项目配置文件project.config.json的setting 中配置字段checkSiteMap 为 false

### 5.页面的 .json 配置文件

小程序中的每一个页面，可以使用.json文件来对本页面的窗口外观进行配置，页面中的配置项会覆盖 app.json 的 window 中相同的配置项。

### 6.新建小程序页面

只需要在app.json->pages 中新增页面的存放路径，小程序开发者工具即可帮我们自动创建对应的页面文件。

### 7.修改项目首页

只需要调整 app.json -> pages 数组中页面路径的前后顺序，即可修改项目的首页。小程序会把排在第一位的页面，当作项目首页进行渲染。

## 小程序代码的构成 - WXML 模板

### 1.什么是 WXML

WXML（WeiXinMarkup Language）是小程序框架设计的一套标签语言，用来构建小程序页面的结构，其作用类似于网页开发中的HTML。

### 2.WXML 和 HTML 的区别

① 标签名称不同

HTML（div, span, img, a）

WXML（view,text, image, navigator）

② 属性节点不同

```js
<a href="#">超链接</a>
<navigator url="/pages/home/home"></navigator>
```

③ 提供了类似于Vue中的模板语法

- 数据绑定
- 列表渲染
- 条件渲染

## 小程序代码的构成 - WXSS 样式

### 1.什么是 WXSS

WXSS(WeiXin Style Sheets)是一套**样式语言**，用于描述WXML的组件样式，类似于网页开发中的CSS。

### 2.WXSS 和 CSS 的区别

① **新增了 rpx 尺寸单位**

CSS中需要手动进行像素单位换算，例如 rem

WXSS在底层支持新的尺寸单位 rpx，在不同大小的屏幕上小程序会自动进行换算

② **提供了全局的样式和局部样式**

项目根目录中的app.wxss 会作用于所有小程序页面

局部页面的.wxss 样式仅对当前页面生效

③ **WXSS仅支持部分CSS选择器**

- .class和 #id
- element
- 并集选择器、后代选择器
- ::after和 ::before 等伪类选择器

## 小程序代码的构成 - JS 逻辑交互

### 1.小程序中的 .js 文件

一个项目仅仅提供界面展示是不够的，在小程序中，我们通过.js文件来处理用户的操作。例如：响应用户的点击、获取用户的位置等等。

### 2.小程序中 .js 文件的分类

小程序中的 JS 文件分为三大类，分别是：

①app.js

是**整个小程序项目的入口文件**，通过调用App() 函数来启动整个小程序

②页面的.js 文件

是**页面的入口文件**，通过调用**Page() 函数**来创建并运行页面

③普通的.js文件

是**普通的功能模块文件**，用来封装**公共的函数或属性**供页面使用
